<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
  <head>
    <meta charset="UTF-8" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" type="text/css" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/mypage.css}"/>

    <script src="https://kit.fontawesome.com/51772bd9bd.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script th:src="@{/js/mypage.js}"></script>

    <title>마이페이지</title>
  </head>
  <body>
    <div id="wrap">
      <header>
        <div id="login">
          <!-- 로그인하지 않았을때(anonymous 상태) 보이는 메뉴 -->
          <li class="nav-item" sec:authorize="isAnonymous()">
            <a class="nav-link" th:href="@{../user/login}">로그인</a>
            <a class="nav-link" th:href="@{../user/register}">회원가입</a>
          </li>
          <!-- 로그인한 사람에게만 보이는 메뉴 -->
          <form class="logout" th:action="@{/user/logout}" method="POST" sec:authorize="isAuthenticated()" th:with="user=${#authentication.getPrincipal().getUser()}">
            <span><button class="logoutBtn" type="submit">로그아웃</button></span>
          </form>
        </div>
        <div id="logo">
          <a th:href="@{../home}">
            <img src="/img/magic-book.png" id="logo_img">
            <div id="logo_text">WSD 도서관</div>
          </a>
        </div>
      </header>
    </div>
    <nav id="menubar">
      <ul>
        <li><a th:href="@{../library/intro}" class="line">도서관 소개</a></li>
        <li><a th:href="@{../library/book}" class="line">도서</a></li>
        <li><a th:href="@{../board/qna}" class="line">QnA</a></li>
        <li><a th:href="@{mypage}" id="click">마이페이지</a></li>
      </ul>
    </nav>

    <!-- /* 인증 헤더 */ -->
    <th:block th:insert="~{common/header::header}"></th:block>

    <div class="container mt-3 text-center" th:with="user=${#authentication.getPrincipal().getUser()}">
      <br />
      <h2><dt>[[${user.name}]]님, 환영합니다.</dt></h2>
      <br />

      <section class="d-inline-flex p-5 text-white" id="myPage">
        <div class="p-5 bg-danger">
          <div>회원</div>
        </div>
        <div class="p-4">
          <div>아이디</div>
          <div>가입일</div>
          <div>전화번호</div>
        </div>
        <div class="p-4">
          <div>[[${user.username}]]</div>
          <div>[[${user.name}]]</div>
          <div>[[${user.phonenumber}]]</div>
        </div>
      </section>
      <br />
      <br />
      <section class="d-flex" id="myPageBtn">
        <div>
          <button class="btn btn-lg"><a th:href="@{rent}">대출 목록 조회</a></button>
          <button class="btn btn-lg"><a th:href="@{reservation}">도서 예약 조회</a></button>
          <button class="btn btn-lg"><a th:href="@{seatReservation}">좌석 예약 조회</a></button>
        </div>
        <div>
          <button class="btn"><a th:href="@{/user/userUpdate(id=${user.id})}">정보 수정</a></button>
        </div>
      </section>
    </div>
  </body>
</html>

